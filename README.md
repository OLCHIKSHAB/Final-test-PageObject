# Final-test-PageObject
Final test PageObject пример яндекс
Теоретическая часть реализации

Шаги:

Пользователь открывает браузер;
Пользователь вводит в адресную строку https://ya.ru/;
Пользователь вводит слово “Hello” в строку поиска;
Пользователь нажимает кнопку “Найти”.

Ожидаемый результат:
Пользователь перенаправлен на выдачу поиска. Выдача поиска имеет подпункты (видео, картинки и тд.).

Проверка: на странице поиска присутствует бар навигации и элементы “картинки” и “видео”.

Практическая часть реализации
Будем использовать библиотеки: selenium и pytest. Установить их можно через пакетный менеджер pip.

pip install selenium

pip install pytest

Так же не забываем скачать драйвер для браузера. В статье используется chrome webdriver. Для работы с ним положим файл в корневой каталог проекта.

Создаем фикстуру

Для начала необходимо реализовать инициализацию для WebDriver. Описывать её будем в фикстуре. Фикстуры в pytest — функции которые имеют свою периодичность выполнения.
С помощью фикстуры, можно подготовить начальное состояние системы для проведения тестирования.

В pytest есть зарезервированное имя для файла с фикстурами — conftest.py. Создаем файл conftest.py и реализуем функцию c именем — browser.

Помечаем ее декоратором @pytest.fixture и передаем параметр scope со значением session. Это означает что данная функция-фикстура будет исполнятся только 1 раз за тестовую сессию.

Далее мы описываем часть, которая будет выполнятся перед тестами. В ней происходит инициализация webdriver с указанием где располагается chromedriver. Далее используем конструкцию yield, которая разделяет функцию на часть — до тестов и после тестов.

В части “после тестов” мы вызываем функцию quit, которая завершает сессию и webdriver.

Создаем файл BaseApp.py. В классе BasePage определяем базовые методы для работы с WebDriver.

В классе BasePage создаем конструктор, который принимает driver — экземпляр webdriver. Указываем base_url, который будет использоваться для открытия страницы.

Далее создаем методы find_element (ищет один элемент и возвращает его) и find_elements (ищет множество и возвращает в виде списка).

Это обертка над WebdriverWait, который отвечает за явные ожидания в Selenium.

В функции определяем время, которое по умолчанию равно 10-и секундам. Это время для поиска элемента. Метод go_to_site — вызывает функцию get из WebDriver. Метод позволяет перейти на указываемую страницу. Передаем в него base_url.

Page object

Наш класс для веб-страницы реализуется в файле YandexPages.py
Создаем класс YandexSeacrhLocators. Он будет только для хранения локаторов.
В классе описываем локаторы:

LOCATOR_YANDEX_SEARCH_FIELD — локатор поисковой строки

LOCATOR_YANDEX_SEARCH_BUTTON — локатор кнопки “Найти”

LOCATOR_YANDEX_NAVIGATION_BAR — локатор бара навигации (Картинки, Видео и т.д.)

Создаем класс SearchHelper, наследуемся от BasePage.

Реализуем вспомогательные методы для работы с поиском:

enter_word — ищет элемент строки поиска, кликает и вводит в поиск необходимое слово;

click_on_the_search_button — ищет элемент кнопки поиска и кликает на неё;

check_navigation_bar — ищет элементы навигации и получает атрибут text. Создает список и фильтрует по условию. Если длина строки больше нуля, то добавляет элемент к списку. Для примера, переопределим время по умолчанию установив его — 2 сек.

Создаем тестовую функцию test_yandex_seacrh, которая будет принимать фикстуру browser.
Далее первой строчкой создаем объект страницы — yandex_main_page. Из объекта вызываем методы взаимодействия с элементами страницы. 
В функции описывается верхнеуровневая логика действий пользователя.
